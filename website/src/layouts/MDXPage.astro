---
// import Debug from 'astro/debug';
import { notionHelpers } from "@utils";
import { SkeletonPage } from '@layouts'
import pokoComponents from '../components/components.jsx'
// import { toMdx } from '@services/notion.mjs'

const { pathname } = Astro.canonicalURL;
const { settings, pages, page, files, paths, websiteTree } = Astro.props;

const { headString } = settings.data || {}
const { MDXContent, props: { metadata, components: _components, ..._props } } = page.data || {}

const components = {...pokoComponents, ..._components} // merge from poko-notion, settings, parents, page

const props = {
  ..._props,
  poko: {
    settings,
    pages,
    // page,
    utils: { ...notionHelpers },
  },
  components,
  metadata,
}

---

<SkeletonPage {...{ path: pathname, ..._props, metadata, components}}>
  <Fragment slot="head" set:html={headString} />

  <MDXContent {...props} />
</SkeletonPage>

